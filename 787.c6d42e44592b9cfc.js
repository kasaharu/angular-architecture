"use strict";(self.webpackChunkangular_architecture=self.webpackChunkangular_architecture||[]).push([[787],{5758:(x,g,i)=>{i.d(g,{E:()=>o});var y=i(529),p=i(8505),f=i(262),b=i(9646),h=i(8274),c=i(6199);class o{constructor(r,d){this._http=r,this._messageService=d,this._heroesUrl="api/heroes",this.httpOptions={headers:new y.WM({"Content-Type":"application/json"})}}getHeroes(){return this._http.get(this._heroesUrl).pipe((0,p.b)(r=>this.log("fetched heroes")),(0,f.K)(this.handleError("getHeroes")))}getHero(r){return this._http.get(`${this._heroesUrl}/${r}`).pipe((0,p.b)(v=>this.log(`fetched hero id=${r}`)),(0,f.K)(this.handleError(`getHero id=${r}`)))}updateHero(r){return this._http.put(this._heroesUrl,r,this.httpOptions).pipe((0,p.b)(d=>this.log(`updated hero id=${r.id}`)),(0,f.K)(this.handleError("updateHero")))}addHero(r){return this._http.post(this._heroesUrl,r,this.httpOptions).pipe((0,p.b)(d=>this.log(`added hero w/ id=${d.id}`)),(0,f.K)(this.handleError("addHero")))}deleteHero(r){return this._http.delete(`${this._heroesUrl}/${r}`,this.httpOptions).pipe((0,p.b)(v=>this.log(`deleted hero id=${r}`)),(0,f.K)(this.handleError("deleteHero")))}searchHeroes(r){return r.trim()?this._http.get(`${this._heroesUrl}/?name=${r}`).pipe((0,p.b)(d=>this.log(`found heroes matching "${r}"`)),(0,f.K)(this.handleError("searchHeroes"))):(0,b.of)([])}log(r){this._messageService.add(`HeroService: ${r}`)}handleError(r){return d=>{throw console.error(d),new Error(`${r} failed: server returned code ${d.status} with body "${d.error}"`)}}}o.\u0275fac=function(r){return new(r||o)(h.LFG(y.eN),h.LFG(c.e))},o.\u0275prov=h.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})},3905:(x,g,i)=>{i.d(g,{z:()=>f});var y=i(6805),p=i(930);function f(b,h){const c="object"==typeof h;return new Promise((o,l)=>{const r=new p.Hp({next:d=>{o(d),r.unsubscribe()},error:l,complete:()=>{c?o(h.defaultValue):l(new y.K)}});b.subscribe(r)})}},1884:(x,g,i)=>{i.d(g,{x:()=>b});var y=i(4671),p=i(4482),f=i(5403);function b(c,o=y.y){return c=c??h,(0,p.e)((l,r)=>{let d,v=!0;l.subscribe((0,f.x)(r,E=>{const $=o(E);(v||!c(d,$))&&(v=!1,d=$,r.next(E))}))})}function h(c,o){return c===o}},4408:(x,g,i)=>{i.d(g,{o:()=>h});var y=i(727);class p extends y.w0{constructor(o,l){super()}schedule(o,l=0){return this}}const f={setInterval(c,o,...l){const{delegate:r}=f;return r?.setInterval?r.setInterval(c,o,...l):setInterval(c,o,...l)},clearInterval(c){const{delegate:o}=f;return(o?.clearInterval||clearInterval)(c)},delegate:void 0};var b=i(8737);class h extends p{constructor(o,l){super(o,l),this.scheduler=o,this.work=l,this.pending=!1}schedule(o,l=0){var r;if(this.closed)return this;this.state=o;const d=this.id,v=this.scheduler;return null!=d&&(this.id=this.recycleAsyncId(v,d,l)),this.pending=!0,this.delay=l,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(v,this.id,l),this}requestAsyncId(o,l,r=0){return f.setInterval(o.flush.bind(o,this),r)}recycleAsyncId(o,l,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return l;null!=l&&f.clearInterval(l)}execute(o,l){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(o,l);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(o,l){let d,r=!1;try{this.work(o)}catch(v){r=!0,d=v||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),d}unsubscribe(){if(!this.closed){const{id:o,scheduler:l}=this,{actions:r}=l;this.work=this.state=this.scheduler=null,this.pending=!1,(0,b.P)(r,this),null!=o&&(this.id=this.recycleAsyncId(l,o,null)),this.delay=null,super.unsubscribe()}}}},7565:(x,g,i)=>{i.d(g,{v:()=>f});var y=i(6063);class p{constructor(h,c=p.now){this.schedulerActionCtor=h,this.now=c}schedule(h,c=0,o){return new this.schedulerActionCtor(this,h).schedule(o,c)}}p.now=y.l.now;class f extends p{constructor(h,c=p.now){super(h,c),this.actions=[],this._active=!1}flush(h){const{actions:c}=this;if(this._active)return void c.push(h);let o;this._active=!0;do{if(o=h.execute(h.state,h.delay))break}while(h=c.shift());if(this._active=!1,o){for(;h=c.shift();)h.unsubscribe();throw o}}}},6063:(x,g,i)=>{i.d(g,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},9671:(x,g,i)=>{function y(f,b,h,c,o,l,r){try{var d=f[l](r),v=d.value}catch(E){return void h(E)}d.done?b(v):Promise.resolve(v).then(c,o)}function p(f){return function(){var b=this,h=arguments;return new Promise(function(c,o){var l=f.apply(b,h);function r(v){y(l,c,o,r,d,"next",v)}function d(v){y(l,c,o,r,d,"throw",v)}r(void 0)})}}i.d(g,{Z:()=>p})},1843:(x,g,i)=>{i.d(g,{m1:()=>he});var y=i(9751),p=i(727),f=i(4408);let h,b=1;const c={};function o(n){return n in c&&(delete c[n],!0)}const l={setImmediate(n){const e=b++;return c[e]=!0,h||(h=Promise.resolve()),h.then(()=>o(e)&&n()),e},clearImmediate(n){o(n)}},{setImmediate:d,clearImmediate:v}=l,E={setImmediate(...n){const{delegate:e}=E;return(e?.setImmediate||d)(...n)},clearImmediate(n){const{delegate:e}=E;return(e?.clearImmediate||v)(n)},delegate:void 0};var M=i(7565);const H=new class Q extends M.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:s}=this;let u;e=e||s.shift();do{if(u=e.execute(e.state,e.delay))break}while((e=s[0])&&e.id===t&&s.shift());if(this._active=!1,u){for(;(e=s[0])&&e.id===t&&s.shift();)e.unsubscribe();throw u}}}(class $ extends f.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,s=0){return null!==s&&s>0?super.requestAsyncId(e,t,s):(e.actions.push(this),e._scheduled||(e._scheduled=E.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,s=0){var u;if(null!=s?s>0:this.delay>0)return super.recycleAsyncId(e,t,s);const{actions:a}=e;null!=t&&(null===(u=a[a.length-1])||void 0===u?void 0:u.id)!==t&&(E.clearImmediate(t),e._scheduled=void 0)}});var j=i(7579),Z=i(6063);class w extends j.x{constructor(e=1/0,t=1/0,s=Z.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:u,_timestampProvider:a,_windowTime:I}=this;t||(s.push(e),!u&&s.push(a.now()+I)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:u}=this,a=u.slice();for(let I=0;I<a.length&&!e.closed;I+=s?1:2)e.next(a[I]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:u}=this,a=(u?1:2)*e;if(e<1/0&&a<s.length&&s.splice(0,s.length-a),!u){const I=t.now();let S=0;for(let m=1;m<s.length&&s[m]<=I;m+=2)S=m;S&&s.splice(0,S+1)}}}var K=i(576);function U(n){return!!n&&(n instanceof y.y||(0,K.m)(n.lift)&&(0,K.m)(n.subscribe))}var W=i(9646);const L=new class X extends M.v{}(class N extends f.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,s=0){return null!=s&&s>0||null==s&&this.delay>0?super.requestAsyncId(e,t,s):(e.flush(this),0)}});var Y=i(515),V=i(2843),J=i(7159),k=i(9841),q=i(5363),R=i(8505),z=i(4482),C=i(5403),_=i(8421),ee=i(4671),B=i(5032),te=i(7669),F=i(4004),ne=i(262);function P(n){return(0,z.e)((e,t)=>{(0,_.Xf)(n).subscribe((0,C.x)(t,()=>t.complete(),B.Z)),!t.closed&&e.subscribe(t)})}var re=i(5698),ie=i(1884),oe=i(3099),O=i(8274);function T(n){return"function"==typeof n.ngrxOnStoreInit}function D(n){return"function"==typeof n.ngrxOnStateInit}const le=new O.OlP("@ngrx/component-store Initial State");let he=(()=>{class n{constructor(t){this.destroySubject$=new w(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new w(1),this.isInitialized=!1,this.state$=this.select(s=>s),this.\u0275hasProvider=!1,t&&this.initState(t),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(t){return s=>{let a,u=!0;const S=(U(s)?s:(0,W.of)(s)).pipe((0,q.Q)(L),(0,R.b)(()=>this.assertStateIsInitialized()),function se(...n){const e=(0,te.jO)(n);return(0,z.e)((t,s)=>{const u=n.length,a=new Array(u);let I=n.map(()=>!1),S=!1;for(let m=0;m<u;m++)(0,_.Xf)(n[m]).subscribe((0,C.x)(s,A=>{a[m]=A,!S&&!I[m]&&(I[m]=!0,(S=I.every(ee.y))&&(I=null))},B.Z));t.subscribe((0,C.x)(s,m=>{if(S){const A=[m,...a];s.next(e?e(...A):A)}}))})}(this.stateSubject$),(0,F.U)(([m,A])=>t(A,m)),(0,R.b)(m=>this.stateSubject$.next(m)),(0,ne.K)(m=>u?(a=m,Y.E):(0,V._)(m)),P(this.destroy$)).subscribe();if(a)throw a;return u=!1,S}}initState(t){(0,J.x)([t],L).subscribe(s=>{this.isInitialized=!0,this.stateSubject$.next(s)})}setState(t){"function"!=typeof t?this.initState(t):this.updater(t)()}patchState(t){const s="function"==typeof t?t(this.get()):t;this.updater((u,a)=>({...u,...a}))(s)}get(t){let s;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,re.q)(1)).subscribe(u=>{s=t?t(u):u}),s}select(...t){const{observablesOrSelectorsObject:s,projector:u,config:a}=function de(n){const e=Array.from(n);let t={debounce:!1};if(function ae(n){return typeof n.debounce<"u"}(e[e.length-1])&&(t={...t,...e.pop()}),1===e.length&&"function"!=typeof e[0])return{observablesOrSelectorsObject:e[0],projector:void 0,config:t};const s=e.pop();return{observablesOrSelectorsObject:e,projector:s,config:t}}(t);return(function fe(n,e){return Array.isArray(n)&&0===n.length&&e}(s,u)?this.stateSubject$:(0,k.a)(s)).pipe(a.debounce?function ce(){return n=>new y.y(e=>{let t,s;const u=new p.w0;return u.add(n.subscribe({complete:()=>{t&&e.next(s),e.complete()},error:a=>{e.error(a)},next:a=>{s=a,t||(t=H.schedule(()=>{e.next(s),t=void 0}),u.add(t))}})),u})}():n=>n,u?(0,F.U)(S=>s.length>0&&Array.isArray(S)?u(...S):u(S)):n=>n,(0,ie.x)(),function ue(n,e,t){let s,u=!1;return n&&"object"==typeof n?({bufferSize:s=1/0,windowTime:e=1/0,refCount:u=!1,scheduler:t}=n):s=n??1/0,(0,oe.B)({connector:()=>new w(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}({refCount:!0,bufferSize:1}),P(this.destroy$))}effect(t){const s=new j.x;return t(s).pipe(P(this.destroy$)).subscribe(),u=>(U(u)?u:(0,W.of)(u)).pipe(P(this.destroy$)).subscribe(I=>{s.next(I)})}checkProviderForHooks(){H.schedule(()=>{if((0,O.X6Q)()&&(T(this)||D(this))&&!this.\u0275hasProvider){const t=[T(this)?"OnStoreInit":"",D(this)?"OnStateInit":""].filter(s=>s);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${t.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return n.\u0275fac=function(t){return new(t||n)(O.LFG(le,8))},n.\u0275prov=O.Yz7({token:n,factory:n.\u0275fac}),n})()}}]);