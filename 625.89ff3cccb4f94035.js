"use strict";(self.webpackChunkangular_architecture=self.webpackChunkangular_architecture||[]).push([[625],{722:(x,b,i)=>{i.d(b,{E:()=>o});var S=i(9862),m=i(9397),v=i(6306),I=i(2096),h=i(2029),f=i(3354);let o=(()=>{class a{constructor(l,p){this._http=l,this._messageService=p,this._heroesUrl="api/heroes",this.httpOptions={headers:new S.WM({"Content-Type":"application/json"})}}getHeroes(){return this._http.get(this._heroesUrl).pipe((0,m.b)(l=>this.log("fetched heroes")),(0,v.K)(this.handleError("getHeroes")))}getHero(l){return this._http.get(`${this._heroesUrl}/${l}`).pipe((0,m.b)(C=>this.log(`fetched hero id=${l}`)),(0,v.K)(this.handleError(`getHero id=${l}`)))}updateHero(l){return this._http.put(this._heroesUrl,l,this.httpOptions).pipe((0,m.b)(p=>this.log(`updated hero id=${l.id}`)),(0,v.K)(this.handleError("updateHero")))}addHero(l){return this._http.post(this._heroesUrl,l,this.httpOptions).pipe((0,m.b)(p=>this.log(`added hero w/ id=${p.id}`)),(0,v.K)(this.handleError("addHero")))}deleteHero(l){return this._http.delete(`${this._heroesUrl}/${l}`,this.httpOptions).pipe((0,m.b)(C=>this.log(`deleted hero id=${l}`)),(0,v.K)(this.handleError("deleteHero")))}searchHeroes(l){return l.trim()?this._http.get(`${this._heroesUrl}/?name=${l}`).pipe((0,m.b)(p=>this.log(`found heroes matching "${l}"`)),(0,v.K)(this.handleError("searchHeroes"))):(0,I.of)([])}log(l){this._messageService.add(`HeroService: ${l}`)}handleError(l){return p=>{throw console.error(p),new Error(`${l} failed: server returned code ${p.status} with body "${p.error}"`)}}}return a.\u0275fac=function(l){return new(l||a)(h.LFG(S.eN),h.LFG(f.e))},a.\u0275prov=h.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},4036:(x,b,i)=>{i.d(b,{z:()=>v});var S=i(6973),m=i(305);function v(I,h){const f="object"==typeof h;return new Promise((o,a)=>{const c=new m.Hp({next:l=>{o(l),c.unsubscribe()},error:a,complete:()=>{f?o(h.defaultValue):a(new S.K)}});I.subscribe(c)})}},1954:(x,b,i)=>{i.d(b,{o:()=>h});var S=i(7394);class m extends S.w0{constructor(o,a){super()}schedule(o,a=0){return this}}const v={setInterval(f,o,...a){const{delegate:c}=v;return c?.setInterval?c.setInterval(f,o,...a):setInterval(f,o,...a)},clearInterval(f){const{delegate:o}=v;return(o?.clearInterval||clearInterval)(f)},delegate:void 0};var I=i(9039);class h extends m{constructor(o,a){super(o,a),this.scheduler=o,this.work=a,this.pending=!1}schedule(o,a=0){var c;if(this.closed)return this;this.state=o;const l=this.id,p=this.scheduler;return null!=l&&(this.id=this.recycleAsyncId(p,l,a)),this.pending=!0,this.delay=a,this.id=null!==(c=this.id)&&void 0!==c?c:this.requestAsyncId(p,this.id,a),this}requestAsyncId(o,a,c=0){return v.setInterval(o.flush.bind(o,this),c)}recycleAsyncId(o,a,c=0){if(null!=c&&this.delay===c&&!1===this.pending)return a;null!=a&&v.clearInterval(a)}execute(o,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const c=this._execute(o,a);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(o,a){let l,c=!1;try{this.work(o)}catch(p){c=!0,l=p||new Error("Scheduled action threw falsy error")}if(c)return this.unsubscribe(),l}unsubscribe(){if(!this.closed){const{id:o,scheduler:a}=this,{actions:c}=a;this.work=this.state=this.scheduler=null,this.pending=!1,(0,I.P)(c,this),null!=o&&(this.id=this.recycleAsyncId(a,o,null)),this.delay=null,super.unsubscribe()}}}},2631:(x,b,i)=>{i.d(b,{v:()=>v});var S=i(4552);class m{constructor(h,f=m.now){this.schedulerActionCtor=h,this.now=f}schedule(h,f=0,o){return new this.schedulerActionCtor(this,h).schedule(o,f)}}m.now=S.l.now;class v extends m{constructor(h,f=m.now){super(h,f),this.actions=[],this._active=!1}flush(h){const{actions:f}=this;if(this._active)return void f.push(h);let o;this._active=!0;do{if(o=h.execute(h.state,h.delay))break}while(h=f.shift());if(this._active=!1,o){for(;h=f.shift();)h.unsubscribe();throw o}}}},4552:(x,b,i)=>{i.d(b,{l:()=>S});const S={now:()=>(S.delegate||Date).now(),delegate:void 0}},9671:(x,b,i)=>{function S(v,I,h,f,o,a,c){try{var l=v[a](c),p=l.value}catch(C){return void h(C)}l.done?I(p):Promise.resolve(p).then(f,o)}function m(v){return function(){var I=this,h=arguments;return new Promise(function(f,o){var a=v.apply(I,h);function c(p){S(a,f,o,c,l,"next",p)}function l(p){S(a,f,o,c,l,"throw",p)}c(void 0)})}}i.d(b,{Z:()=>m})},9381:(x,b,i)=>{i.d(b,{m1:()=>Ve});var S=i(5592),m=i(7394),v=i(1954);let h,I=1;const f={};function o(r){return r in f&&(delete f[r],!0)}const a={setImmediate(r){const e=I++;return f[e]=!0,h||(h=Promise.resolve()),h.then(()=>o(e)&&r()),e},clearImmediate(r){o(r)}},{setImmediate:l,clearImmediate:p}=a,C={setImmediate(...r){const{delegate:e}=C;return(e?.setImmediate||l)(...r)},clearImmediate(r){const{delegate:e}=C;return(e?.clearImmediate||p)(r)},delegate:void 0};var N=i(2631);const L=new class oe extends N.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let s;e=e||n.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,s){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw s}}}(class ie extends v.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=C.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,n=0){var s;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:u}=e;null!=t&&(null===(s=u[u.length-1])||void 0===s?void 0:s.id)!==t&&(C.clearImmediate(t),e._scheduled=void 0)}});var K=i(8645),ue=i(4552);class O extends K.x{constructor(e=1/0,t=1/0,n=ue.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:n,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:d}=this;t||(n.push(e),!s&&n.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:n,_buffer:s}=this,u=s.slice();for(let d=0;d<u.length&&!e.closed;d+=n?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<n.length&&n.splice(0,n.length-u),!s){const d=t.now();let y=0;for(let g=1;g<n.length&&n[g]<=d;g+=2)y=g;y&&n.splice(0,y+1)}}}var z=i(7258),G=i(2096);const _=new class ae extends N.v{}(class le extends v.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!=n&&n>0||null==n&&this.delay>0?super.requestAsyncId(e,t,n):(e.flush(this),0)}});var ce=i(6232),de=i(8504),he=i(5154),fe=i(2572),B=i(9360),T=i(8251),Q=i(4829),X=i(2420);function M(r){return(0,B.e)((e,t)=>{(0,Q.Xf)(r).subscribe((0,T.x)(t,()=>t.complete(),X.Z)),!t.closed&&e.subscribe(t)})}var pe=i(3093),Y=i(9397),ve=i(2737),ge=i(4564),Z=i(7398),ye=i(6306),Se=i(8180),be=i(3997),Ie=i(3020),w=i(2029);class Ae extends Error{constructor(e,t){super(function xe(r,e){return`NG0${Math.abs(r)}${e?": "+e:""}`}(e,t)),this.code=e}}function re(r,e){const t=!e?.manualCleanup;t&&!e?.injector&&(0,w.gHi)(re);const n=t?e?.injector?.get(w.ktI)??(0,w.f3M)(w.ktI):null;let s;s=(0,w.tdS)(e?.requireSync?{kind:0}:{kind:1,value:e?.initialValue});const u=r.subscribe({next:d=>s.set({kind:1,value:d}),error:d=>s.set({kind:2,error:d})});return n?.onDestroy(u.unsubscribe.bind(u)),(0,w.Flj)(()=>{const d=s();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new Ae(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}function k(r){return"function"==typeof r.ngrxOnStoreInit}function F(r){return"function"==typeof r.ngrxOnStateInit}const je=new w.OlP("@ngrx/component-store Initial State");let Ve=(()=>{class r{constructor(t){this.destroySubject$=new O(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new O(1),this.isInitialized=!1,this.state$=this.select(n=>n),this.state=re(this.stateSubject$.pipe(M(this.destroy$)),{requireSync:!1,manualCleanup:!0}),this.\u0275hasProvider=!1,t&&this.initState(t),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(t){return n=>{let u,s=!0;const y=((0,z.b)(n)?n:(0,G.of)(n)).pipe((0,pe.Q)(_),(0,Y.b)(()=>this.assertStateIsInitialized()),function me(...r){const e=(0,ge.jO)(r);return(0,B.e)((t,n)=>{const s=r.length,u=new Array(s);let d=r.map(()=>!1),y=!1;for(let g=0;g<s;g++)(0,Q.Xf)(r[g]).subscribe((0,T.x)(n,A=>{u[g]=A,!y&&!d[g]&&(d[g]=!0,(y=d.every(ve.y))&&(d=null))},X.Z));t.subscribe((0,T.x)(n,g=>{if(y){const A=[g,...u];n.next(e?e(...A):A)}}))})}(this.stateSubject$),(0,Z.U)(([g,A])=>t(A,g)),(0,Y.b)(g=>this.stateSubject$.next(g)),(0,ye.K)(g=>s?(u=g,ce.E):(0,de._)(g)),M(this.destroy$)).subscribe();if(u)throw u;return s=!1,y}}initState(t){(0,he.x)([t],_).subscribe(n=>{this.isInitialized=!0,this.stateSubject$.next(n)})}setState(t){"function"!=typeof t?this.initState(t):this.updater(t)()}patchState(t){const n="function"==typeof t?t(this.get()):t;this.updater((s,u)=>({...s,...u}))(n)}get(t){let n;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,Se.q)(1)).subscribe(s=>{n=t?t(s):s}),n}select(...t){const{observablesOrSelectorsObject:n,projector:s,config:u}=function Ue(r){const e=Array.from(r);let n={debounce:!1,equal:(d,y)=>d===y};if(function He(r){return typeof r.debounce<"u"||typeof r.equal<"u"}(e[e.length-1])&&(n={...n,...e.pop()}),1===e.length&&"function"!=typeof e[0])return{observablesOrSelectorsObject:e[0],projector:void 0,config:n};const s=e.pop();return{observablesOrSelectorsObject:e,projector:s,config:n}}(t);return(function ke(r,e){return Array.isArray(r)&&0===r.length&&e}(n,s)?this.stateSubject$:(0,fe.a)(n)).pipe(u.debounce?function Te(){return r=>new S.y(e=>{let t,n;const s=new m.w0;return s.add(r.subscribe({complete:()=>{t&&e.next(n),e.complete()},error:u=>{e.error(u)},next:u=>{n=u,t||(t=L.schedule(()=>{e.next(n),t=void 0}),s.add(t))}})),s})}():r=>r,s?(0,Z.U)(y=>n.length>0&&Array.isArray(y)?s(...y):s(y)):r=>r,(0,be.x)(u.equal),function we(r,e,t){let n,s=!1;return r&&"object"==typeof r?({bufferSize:n=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=r):n=r??1/0,(0,Ie.B)({connector:()=>new O(n,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}({refCount:!0,bufferSize:1}),M(this.destroy$))}selectSignal(...t){const n=[...t],s=(A,W)=>A===W,u="object"==typeof n[t.length-1]?{equal:n.pop().equal||s}:{equal:s},d=n.pop(),y=n;return(0,w.Flj)(0===y.length?()=>d(this.state()):()=>{const A=y.map(W=>W());return d(...A)},u)}effect(t){const n=new K.x;return t(n).pipe(M(this.destroy$)).subscribe(),s=>((0,z.b)(s)?s:(0,G.of)(s)).pipe(M(this.destroy$)).subscribe(d=>{n.next(d)})}checkProviderForHooks(){L.schedule(()=>{if((0,w.X6Q)()&&(k(this)||F(this))&&!this.\u0275hasProvider){const t=[k(this)?"OnStoreInit":"",F(this)?"OnStateInit":""].filter(n=>n);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${t.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return r.\u0275fac=function(t){return new(t||r)(w.LFG(je,8))},r.\u0275prov=w.Yz7({token:r,factory:r.\u0275fac}),r})()}}]);