"use strict";(self.webpackChunkangular_architecture=self.webpackChunkangular_architecture||[]).push([[787],{5758:(x,g,r)=>{r.d(g,{E:()=>i});var y=r(529),v=r(8505),p=r(262),b=r(9646),d=r(8274),l=r(6199);let i=(()=>{class c{constructor(u,a){this._http=u,this._messageService=a,this._heroesUrl="api/heroes",this.httpOptions={headers:new y.WM({"Content-Type":"application/json"})}}getHeroes(){return this._http.get(this._heroesUrl).pipe((0,v.b)(u=>this.log("fetched heroes")),(0,p.K)(this.handleError("getHeroes")))}getHero(u){return this._http.get(`${this._heroesUrl}/${u}`).pipe((0,v.b)(S=>this.log(`fetched hero id=${u}`)),(0,p.K)(this.handleError(`getHero id=${u}`)))}updateHero(u){return this._http.put(this._heroesUrl,u,this.httpOptions).pipe((0,v.b)(a=>this.log(`updated hero id=${u.id}`)),(0,p.K)(this.handleError("updateHero")))}addHero(u){return this._http.post(this._heroesUrl,u,this.httpOptions).pipe((0,v.b)(a=>this.log(`added hero w/ id=${a.id}`)),(0,p.K)(this.handleError("addHero")))}deleteHero(u){return this._http.delete(`${this._heroesUrl}/${u}`,this.httpOptions).pipe((0,v.b)(S=>this.log(`deleted hero id=${u}`)),(0,p.K)(this.handleError("deleteHero")))}searchHeroes(u){return u.trim()?this._http.get(`${this._heroesUrl}/?name=${u}`).pipe((0,v.b)(a=>this.log(`found heroes matching "${u}"`)),(0,p.K)(this.handleError("searchHeroes"))):(0,b.of)([])}log(u){this._messageService.add(`HeroService: ${u}`)}handleError(u){return a=>{throw console.error(a),new Error(`${u} failed: server returned code ${a.status} with body "${a.error}"`)}}}return c.\u0275fac=function(u){return new(u||c)(d.LFG(y.eN),d.LFG(l.e))},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},3905:(x,g,r)=>{r.d(g,{z:()=>p});var y=r(6805),v=r(930);function p(b,d){const l="object"==typeof d;return new Promise((i,c)=>{const h=new v.Hp({next:u=>{i(u),h.unsubscribe()},error:c,complete:()=>{l?i(d.defaultValue):c(new y.K)}});b.subscribe(h)})}},1884:(x,g,r)=>{r.d(g,{x:()=>b});var y=r(4671),v=r(4482),p=r(5403);function b(l,i=y.y){return l=l??d,(0,v.e)((c,h)=>{let u,a=!0;c.subscribe((0,p.x)(h,S=>{const $=i(S);(a||!l(u,$))&&(a=!1,u=$,h.next(S))}))})}function d(l,i){return l===i}},4408:(x,g,r)=>{r.d(g,{o:()=>d});var y=r(727);class v extends y.w0{constructor(i,c){super()}schedule(i,c=0){return this}}const p={setInterval(l,i,...c){const{delegate:h}=p;return h?.setInterval?h.setInterval(l,i,...c):setInterval(l,i,...c)},clearInterval(l){const{delegate:i}=p;return(i?.clearInterval||clearInterval)(l)},delegate:void 0};var b=r(8737);class d extends v{constructor(i,c){super(i,c),this.scheduler=i,this.work=c,this.pending=!1}schedule(i,c=0){var h;if(this.closed)return this;this.state=i;const u=this.id,a=this.scheduler;return null!=u&&(this.id=this.recycleAsyncId(a,u,c)),this.pending=!0,this.delay=c,this.id=null!==(h=this.id)&&void 0!==h?h:this.requestAsyncId(a,this.id,c),this}requestAsyncId(i,c,h=0){return p.setInterval(i.flush.bind(i,this),h)}recycleAsyncId(i,c,h=0){if(null!=h&&this.delay===h&&!1===this.pending)return c;null!=c&&p.clearInterval(c)}execute(i,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const h=this._execute(i,c);if(h)return h;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,c){let u,h=!1;try{this.work(i)}catch(a){h=!0,u=a||new Error("Scheduled action threw falsy error")}if(h)return this.unsubscribe(),u}unsubscribe(){if(!this.closed){const{id:i,scheduler:c}=this,{actions:h}=c;this.work=this.state=this.scheduler=null,this.pending=!1,(0,b.P)(h,this),null!=i&&(this.id=this.recycleAsyncId(c,i,null)),this.delay=null,super.unsubscribe()}}}},7565:(x,g,r)=>{r.d(g,{v:()=>p});var y=r(6063);class v{constructor(d,l=v.now){this.schedulerActionCtor=d,this.now=l}schedule(d,l=0,i){return new this.schedulerActionCtor(this,d).schedule(i,l)}}v.now=y.l.now;class p extends v{constructor(d,l=v.now){super(d,l),this.actions=[],this._active=!1}flush(d){const{actions:l}=this;if(this._active)return void l.push(d);let i;this._active=!0;do{if(i=d.execute(d.state,d.delay))break}while(d=l.shift());if(this._active=!1,i){for(;d=l.shift();)d.unsubscribe();throw i}}}},6063:(x,g,r)=>{r.d(g,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},9671:(x,g,r)=>{function y(p,b,d,l,i,c,h){try{var u=p[c](h),a=u.value}catch(S){return void d(S)}u.done?b(a):Promise.resolve(a).then(l,i)}function v(p){return function(){var b=this,d=arguments;return new Promise(function(l,i){var c=p.apply(b,d);function h(a){y(c,l,i,h,u,"next",a)}function u(a){y(c,l,i,h,u,"throw",a)}h(void 0)})}}r.d(g,{Z:()=>v})},1843:(x,g,r)=>{r.d(g,{m1:()=>he});var y=r(9751),v=r(727),p=r(4408);let d,b=1;const l={};function i(n){return n in l&&(delete l[n],!0)}const c={setImmediate(n){const e=b++;return l[e]=!0,d||(d=Promise.resolve()),d.then(()=>i(e)&&n()),e},clearImmediate(n){i(n)}},{setImmediate:u,clearImmediate:a}=c,S={setImmediate(...n){const{delegate:e}=S;return(e?.setImmediate||u)(...n)},clearImmediate(n){const{delegate:e}=S;return(e?.clearImmediate||a)(n)},delegate:void 0};var M=r(7565);const H=new class Q extends M.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:s}=this;let o;e=e||s.shift();do{if(o=e.execute(e.state,e.delay))break}while((e=s[0])&&e.id===t&&s.shift());if(this._active=!1,o){for(;(e=s[0])&&e.id===t&&s.shift();)e.unsubscribe();throw o}}}(class $ extends p.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,s=0){return null!==s&&s>0?super.requestAsyncId(e,t,s):(e.actions.push(this),e._scheduled||(e._scheduled=S.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,s=0){var o;if(null!=s?s>0:this.delay>0)return super.recycleAsyncId(e,t,s);const{actions:f}=e;null!=t&&(null===(o=f[f.length-1])||void 0===o?void 0:o.id)!==t&&(S.clearImmediate(t),e._scheduled=void 0)}});var j=r(7579),Z=r(6063);class w extends j.x{constructor(e=1/0,t=1/0,s=Z.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:o,_timestampProvider:f,_windowTime:I}=this;t||(s.push(e),!o&&s.push(f.now()+I)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:o}=this,f=o.slice();for(let I=0;I<f.length&&!e.closed;I+=s?1:2)e.next(f[I]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:o}=this,f=(o?1:2)*e;if(e<1/0&&f<s.length&&s.splice(0,s.length-f),!o){const I=t.now();let E=0;for(let m=1;m<s.length&&s[m]<=I;m+=2)E=m;E&&s.splice(0,E+1)}}}var K=r(576);function U(n){return!!n&&(n instanceof y.y||(0,K.m)(n.lift)&&(0,K.m)(n.subscribe))}var W=r(9646);const L=new class X extends M.v{}(class N extends p.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,s=0){return null!=s&&s>0||null==s&&this.delay>0?super.requestAsyncId(e,t,s):(e.flush(this),0)}});var Y=r(515),V=r(2843),J=r(7159),k=r(9841),q=r(5363),R=r(8505),z=r(4482),C=r(5403),_=r(8421),ee=r(4671),B=r(5032),te=r(7669),F=r(4004),ne=r(262);function P(n){return(0,z.e)((e,t)=>{(0,_.Xf)(n).subscribe((0,C.x)(t,()=>t.complete(),B.Z)),!t.closed&&e.subscribe(t)})}var re=r(5698),ie=r(1884),oe=r(3099),O=r(8274);function T(n){return"function"==typeof n.ngrxOnStoreInit}function D(n){return"function"==typeof n.ngrxOnStateInit}const le=new O.OlP("@ngrx/component-store Initial State");let he=(()=>{class n{constructor(t){this.destroySubject$=new w(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new w(1),this.isInitialized=!1,this.state$=this.select(s=>s),this.\u0275hasProvider=!1,t&&this.initState(t),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(t){return s=>{let f,o=!0;const E=(U(s)?s:(0,W.of)(s)).pipe((0,q.Q)(L),(0,R.b)(()=>this.assertStateIsInitialized()),function se(...n){const e=(0,te.jO)(n);return(0,z.e)((t,s)=>{const o=n.length,f=new Array(o);let I=n.map(()=>!1),E=!1;for(let m=0;m<o;m++)(0,_.Xf)(n[m]).subscribe((0,C.x)(s,A=>{f[m]=A,!E&&!I[m]&&(I[m]=!0,(E=I.every(ee.y))&&(I=null))},B.Z));t.subscribe((0,C.x)(s,m=>{if(E){const A=[m,...f];s.next(e?e(...A):A)}}))})}(this.stateSubject$),(0,F.U)(([m,A])=>t(A,m)),(0,R.b)(m=>this.stateSubject$.next(m)),(0,ne.K)(m=>o?(f=m,Y.E):(0,V._)(m)),P(this.destroy$)).subscribe();if(f)throw f;return o=!1,E}}initState(t){(0,J.x)([t],L).subscribe(s=>{this.isInitialized=!0,this.stateSubject$.next(s)})}setState(t){"function"!=typeof t?this.initState(t):this.updater(t)()}patchState(t){const s="function"==typeof t?t(this.get()):t;this.updater((o,f)=>({...o,...f}))(s)}get(t){let s;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,re.q)(1)).subscribe(o=>{s=t?t(o):o}),s}select(...t){const{observablesOrSelectorsObject:s,projector:o,config:f}=function de(n){const e=Array.from(n);let t={debounce:!1};if(function ae(n){return typeof n.debounce<"u"}(e[e.length-1])&&(t={...t,...e.pop()}),1===e.length&&"function"!=typeof e[0])return{observablesOrSelectorsObject:e[0],projector:void 0,config:t};const s=e.pop();return{observablesOrSelectorsObject:e,projector:s,config:t}}(t);return(function fe(n,e){return Array.isArray(n)&&0===n.length&&e}(s,o)?this.stateSubject$:(0,k.a)(s)).pipe(f.debounce?function ce(){return n=>new y.y(e=>{let t,s;const o=new v.w0;return o.add(n.subscribe({complete:()=>{t&&e.next(s),e.complete()},error:f=>{e.error(f)},next:f=>{s=f,t||(t=H.schedule(()=>{e.next(s),t=void 0}),o.add(t))}})),o})}():n=>n,o?(0,F.U)(E=>s.length>0&&Array.isArray(E)?o(...E):o(E)):n=>n,(0,ie.x)(),function ue(n,e,t){let s,o=!1;return n&&"object"==typeof n?({bufferSize:s=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):s=n??1/0,(0,oe.B)({connector:()=>new w(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}({refCount:!0,bufferSize:1}),P(this.destroy$))}effect(t){const s=new j.x;return t(s).pipe(P(this.destroy$)).subscribe(),o=>(U(o)?o:(0,W.of)(o)).pipe(P(this.destroy$)).subscribe(I=>{s.next(I)})}checkProviderForHooks(){H.schedule(()=>{if((0,O.X6Q)()&&(T(this)||D(this))&&!this.\u0275hasProvider){const t=[T(this)?"OnStoreInit":"",D(this)?"OnStateInit":""].filter(s=>s);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${t.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return n.\u0275fac=function(t){return new(t||n)(O.LFG(le,8))},n.\u0275prov=O.Yz7({token:n,factory:n.\u0275fac}),n})()}}]);